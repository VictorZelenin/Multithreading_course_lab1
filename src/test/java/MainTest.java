package tests;

import main.Main;

import static org.junit.Assert.*;

import org.junit.Test;

import java.io.IOException;

/**
 * Created by User on 20.02.2016.
 */
public class MainTest {


    @Test
    public void sequentialTest5() throws IOException {

        int[][] matrix = {
                {3, 3, 1, 7, 3},
                {0, 1, 9, 4, 3},
                {-4, 2, 95, 1, 7},
                {-4, 23, 11, 7, 3},
                {3, 9, 3, 2, 8}};
        int[] vector = {6, 3, 9, 3, 1};
        int[] result = {60, 99, 847, 168, 86};

        assertArrayEquals(result, Main.multiply(matrix, vector));

    }

    @Test
    public void sequentialTest20() throws IOException {
        int[][] matrix = {
                {58, 100, 16, 21, 22, 58, 20, 63, 48, 10, 50, 89, 96, 99, 11, 26, 34, 86, 32, 28},
                {85, 72, 100, 85, 90, 5, 70, 13, 90, 54, 15, 21, 21, 62, 91, 12, 29, 51, 15, 54},
                {88, 33, 34, 84, 99, 1, 92, 33, 68, 0, 32, 43, 43, 93, 35, 18, 24, 57, 97, 23},
                {24, 66, 89, 42, 42, 84, 34, 34, 46, 48, 36, 7, 58, 67, 34, 77, 91, 63, 86, 57},
                {69, 90, 51, 80, 47, 14, 47, 30, 14, 23, 37, 57, 58, 3, 23, 77, 69, 95, 98, 10},
                {17, 67, 56, 7, 82, 27, 2, 20, 68, 42, 3, 99, 49, 40, 41, 6, 21, 57, 32, 75},
                {5, 92, 38, 40, 70, 47, 49, 41, 84, 1, 40, 49, 63, 34, 20, 32, 72, 41, 53, 38},
                {92, 98, 39, 17, 48, 38, 96, 28, 81, 53, 42, 58, 100, 98, 80, 84, 87, 96, 93, 20},
                {47, 40, 55, 70, 60, 94, 71, 75, 23, 17, 64, 66, 16, 22, 45, 62, 88, 48, 6, 38},
                {8, 71, 17, 78, 68, 98, 93, 35, 22, 94, 59, 19, 60, 77, 47, 53, 26, 53, 85, 5},
                {38, 39, 96, 5, 30, 78, 32, 37, 47, 11, 36, 75, 59, 71, 40, 90, 79, 79, 80, 43},
                {38, 95, 45, 36, 53, 8, 17, 16, 38, 43, 46, 39, 66, 80, 39, 3, 38, 78, 96, 82},
                {62, 67, 28, 11, 93, 78, 19, 1, 57, 88, 89, 55, 27, 39, 80, 56, 3, 4, 80, 14},
                {75, 9, 40, 53, 78, 48, 88, 61, 52, 73, 63, 86, 57, 4, 29, 65, 29, 90, 94, 85},
                {69, 87, 84, 38, 31, 70, 87, 80, 68, 68, 5, 67, 88, 31, 68, 5, 63, 55, 36, 70},
                {21, 78, 72, 21, 92, 37, 46, 44, 21, 0, 67, 25, 29, 36, 68, 17, 66, 62, 66, 66},
                {54, 23, 82, 9, 89, 56, 96, 91, 43, 9, 99, 62, 75, 19, 69, 2, 42, 2, 23, 5},
                {67, 51, 60, 78, 30, 93, 5, 53, 94, 84, 14, 7, 5, 24, 9, 65, 69, 67, 23, 28},
                {24, 31, 59, 97, 2, 99, 32, 73, 96, 82, 45, 41, 37, 14, 94, 67, 6, 54, 91, 33},
                {3, 76, 58, 26, 13, 96, 13, 51, 39, 72, 70, 52, 62, 99, 41, 66, 43, 2, 27, 16}};
        int[] vector = {87, 59, 65, 98, 28, 89, 98, 100, 12, 98, 28, 86, 19, 65, 17, 0, 64, 94, 88, 2};
        int[] result = {60270, 60250, 63565, 63596, 64674, 44079, 50687, 79697, 64045, 70716, 62079, 55631,
                52327, 73562, 74679, 52261, 56496, 60245, 67280, 53959};

        assertArrayEquals(result, Main.multiply(matrix, vector));
    }

    @Test
    public void parallelTest5() throws IOException, InterruptedException {
        int[][] matrix = {
                {3, 3, 1, 7, 3},
                {0, 1, 9, 4, 3},
                {-4, 2, 95, 1, 7},
                {-4, 23, 11, 7, 3},
                {3, 9, 3, 2, 8}};
        int[] vector = {6, 3, 9, 3, 1};

        assertArrayEquals(Main.multiply(matrix, vector), Main.multiplyParallel(matrix, vector, 4));
    }

    @Test
    public void parallelTest20() throws Exception {
        int[][] matrix = {
                {58, 100, 16, 21, 22, 58, 20, 63, 48, 10, 50, 89, 96, 99, 11, 26, 34, 86, 32, 28},
                {85, 72, 100, 85, 90, 5, 70, 13, 90, 54, 15, 21, 21, 62, 91, 12, 29, 51, 15, 54},
                {88, 33, 34, 84, 99, 1, 92, 33, 68, 0, 32, 43, 43, 93, 35, 18, 24, 57, 97, 23},
                {24, 66, 89, 42, 42, 84, 34, 34, 46, 48, 36, 7, 58, 67, 34, 77, 91, 63, 86, 57},
                {69, 90, 51, 80, 47, 14, 47, 30, 14, 23, 37, 57, 58, 3, 23, 77, 69, 95, 98, 10},
                {17, 67, 56, 7, 82, 27, 2, 20, 68, 42, 3, 99, 49, 40, 41, 6, 21, 57, 32, 75},
                {5, 92, 38, 40, 70, 47, 49, 41, 84, 1, 40, 49, 63, 34, 20, 32, 72, 41, 53, 38},
                {92, 98, 39, 17, 48, 38, 96, 28, 81, 53, 42, 58, 100, 98, 80, 84, 87, 96, 93, 20},
                {47, 40, 55, 70, 60, 94, 71, 75, 23, 17, 64, 66, 16, 22, 45, 62, 88, 48, 6, 38},
                {8, 71, 17, 78, 68, 98, 93, 35, 22, 94, 59, 19, 60, 77, 47, 53, 26, 53, 85, 5},
                {38, 39, 96, 5, 30, 78, 32, 37, 47, 11, 36, 75, 59, 71, 40, 90, 79, 79, 80, 43},
                {38, 95, 45, 36, 53, 8, 17, 16, 38, 43, 46, 39, 66, 80, 39, 3, 38, 78, 96, 82},
                {62, 67, 28, 11, 93, 78, 19, 1, 57, 88, 89, 55, 27, 39, 80, 56, 3, 4, 80, 14},
                {75, 9, 40, 53, 78, 48, 88, 61, 52, 73, 63, 86, 57, 4, 29, 65, 29, 90, 94, 85},
                {69, 87, 84, 38, 31, 70, 87, 80, 68, 68, 5, 67, 88, 31, 68, 5, 63, 55, 36, 70},
                {21, 78, 72, 21, 92, 37, 46, 44, 21, 0, 67, 25, 29, 36, 68, 17, 66, 62, 66, 66},
                {54, 23, 82, 9, 89, 56, 96, 91, 43, 9, 99, 62, 75, 19, 69, 2, 42, 2, 23, 5},
                {67, 51, 60, 78, 30, 93, 5, 53, 94, 84, 14, 7, 5, 24, 9, 65, 69, 67, 23, 28},
                {24, 31, 59, 97, 2, 99, 32, 73, 96, 82, 45, 41, 37, 14, 94, 67, 6, 54, 91, 33},
                {3, 76, 58, 26, 13, 96, 13, 51, 39, 72, 70, 52, 62, 99, 41, 66, 43, 2, 27, 16}};
        int[] vector = {87, 59, 65, 98, 28, 89, 98, 100, 12, 98, 28, 86, 19, 65, 17, 0, 64, 94, 88, 2};

        assertArrayEquals(Main.multiply(matrix, vector), Main.multiplyParallel(matrix, vector, 4));
    }

    @Test
    public void parallelTestThread1() throws IOException, InterruptedException {

        int[][] matrix = {
                {3, 3, 1, 7, 3},
                {0, 1, 9, 4, 3},
                {-4, 2, 95, 1, 7},
                {-4, 23, 11, 7, 3},
                {3, 9, 3, 2, 8}};
        int[] vector = {6, 3, 9, 3, 1};
        int[] result = {60, 99, 847, 168, 86};

        assertArrayEquals(result, Main.multiplyParallel(matrix, vector, 1));

    }

    @Test
    public void parallelTestThread20() throws IOException, InterruptedException {

        int[][] matrix = {
                {3, 3, 1, 7, 3},
                {0, 1, 9, 4, 3},
                {-4, 2, 95, 1, 7},
                {-4, 23, 11, 7, 3},
                {3, 9, 3, 2, 8}};
        int[] vector = {6, 3, 9, 3, 1};
        int[] result = {60, 99, 847, 168, 86};

        assertArrayEquals(result, Main.multiplyParallel(matrix, vector, 20));

    }
}
